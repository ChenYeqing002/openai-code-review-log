## ä»£ç è¯„å®¡æŠ¥å‘Š

### æ€»ä½“è¯„ä»·
è¿™æ˜¯ä¸€ä¸ªå¯¹ Git æ“ä½œè¿›è¡Œå¼‚å¸¸å¤„ç†æ”¹è¿›çš„ä»£ç å˜æ›´ï¼Œæ•´ä½“æ–¹å‘æ­£ç¡®ï¼Œä½†åœ¨å®ç°ç»†èŠ‚ä¸Šè¿˜æœ‰ä¼˜åŒ–ç©ºé—´ã€‚

### ä¸»è¦æ”¹è¿›ç‚¹

#### âœ… ä¼˜ç‚¹ï¼š
1. **å¼‚å¸¸å¤„ç†å¢å¼º**ï¼šä»ç®€å•çš„ `throws Exception` æ”¹ä¸ºå…·ä½“çš„ try-catch å¤„ç†
2. **èµ„æºç®¡ç†**ï¼šåœ¨ finally å—ä¸­æ­£ç¡®å…³é—­ Git èµ„æº
3. **é”™è¯¯ä¿¡æ¯æ˜ç¡®**ï¼šæä¾›äº†æ›´æ¸…æ™°çš„é”™è¯¯æ—¥å¿—å’Œå¼‚å¸¸ä¿¡æ¯

### é—®é¢˜å’Œå»ºè®®

#### ğŸ”´ ä¸¥é‡é—®é¢˜ï¼š

1. **é‡å¤å…‹éš†ä»“åº“**
```java
// æ¯æ¬¡è°ƒç”¨éƒ½ä¼šé‡æ–°å…‹éš†æ•´ä¸ªä»“åº“ï¼Œæ€§èƒ½æå·®
git = Git.cloneRepository()
    .setURI(repositoryUrl)
    .setDirectory(new File("repo"))
```
**å»ºè®®**ï¼šæ£€æŸ¥æœ¬åœ°æ˜¯å¦å·²å­˜åœ¨ä»“åº“ï¼Œé¿å…é‡å¤å…‹éš†

#### ğŸŸ¡ æ¶æ„é—®é¢˜ï¼š

2. **ç¡¬ç¼–ç é…ç½®**
```java
String repositoryUrl = "https://github.com/ChenYeqing002/openai-code-review-log.git";
```
**å»ºè®®**ï¼šå°†ä»“åº“ URL æå–ä¸ºé…ç½®å‚æ•°

3. **æ–‡ä»¶è·¯å¾„ç¡¬ç¼–ç **
```java
File dateFolder = new File("repo/" + dateFolderName);
```
**å»ºè®®**ï¼šä½¿ç”¨ä¸´æ—¶ç›®å½•æˆ–é…ç½®åŒ–è·¯å¾„

#### ğŸŸ  ä»£ç è´¨é‡é—®é¢˜ï¼š

4. **å¼‚å¸¸å¤„ç†è¿‡äºå®½æ³›**
```java
} catch (Exception e) {
    System.out.println("Git clone failed for repository: " + repositoryUrl);
    throw new RuntimeException("Repository clone failed", e);
}
```
**å»ºè®®**ï¼š
```java
} catch (GitAPIException e) {
    logger.error("Git operation failed for repository: {}", repositoryUrl, e);
    throw new CodeReviewException("Git operation failed", e);
} catch (IOException e) {
    logger.error("File operation failed", e);
    throw new CodeReviewException("File operation failed", e);
}
```

5. **ç¼ºå°‘æ—¥å¿—æ¡†æ¶**
```java
System.out.println("Git clone failed for repository: " + repositoryUrl);
```
**å»ºè®®**ï¼šä½¿ç”¨ SLF4J ç­‰æ ‡å‡†æ—¥å¿—æ¡†æ¶

### é‡æ„å»ºè®®

```java
@Component
public class GitLogService {
    private static final Logger logger = LoggerFactory.getLogger(GitLogService.class);
    
    @Value("${git.repository.url}")
    private String repositoryUrl;
    
    @Value("${git.local.path}")
    private String localPath;
    
    public String writeLog(String token, String log) {
        Git git = null;
        try {
            File repoDir = new File(localPath);
            if (!repoDir.exists()) {
                git = cloneRepository(token, repoDir);
            } else {
                git = Git.open(repoDir);
                pullLatestChanges(git, token);
            }
            
            return commitAndPush(git, token, log);
            
        } catch (GitAPIException e) {
            logger.error("Git operation failed", e);
            throw new CodeReviewException("Git operation failed", e);
        } catch (IOException e) {
            logger.error("IO operation failed", e);
            throw new CodeReviewException("IO operation failed", e);
        } finally {
            if (git != null) {
                git.close();
            }
        }
    }
    
    // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}
```

### æ€»ç»“
å½“å‰ä¿®æ”¹åœ¨å¼‚å¸¸å¤„ç†æ–¹é¢æœ‰æ‰€æ”¹è¿›ï¼Œä½†éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ã€é…ç½®åŒ–å’Œé”™è¯¯å¤„ç†ç²’åº¦ã€‚å»ºè®®é‡‡ç”¨ä¸Šè¿°é‡æ„æ–¹æ¡ˆæ¥æå‡ä»£ç è´¨é‡å’Œç³»ç»Ÿæ€§èƒ½ã€‚